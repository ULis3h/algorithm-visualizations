# SPTAG (ç©ºé—´åˆ†åŒºæ ‘ä¸å›¾) å¯è§†åŒ–æ¼”ç¤º ğŸ¯

## ç®—æ³•ç®€ä»‹

SPTAG (Space Partition Tree And Graphï¼Œç©ºé—´åˆ†åŒºæ ‘ä¸å›¾) æ˜¯ä¸€ç§é«˜æ€§èƒ½çš„å‘é‡ç›¸ä¼¼åº¦æœç´¢ç®—æ³•ï¼Œå®ƒç»“åˆäº†ç©ºé—´åˆ†åŒºæ ‘å’Œå¯å¯¼èˆªå°ä¸–ç•Œå›¾çš„ä¼˜ç‚¹ã€‚è¯¥ç®—æ³•ç”±å¾®è½¯å¼€å‘ï¼Œç‰¹åˆ«é€‚ç”¨äºå¤§è§„æ¨¡ã€é«˜ç»´åº¦çš„æœ€è¿‘é‚»æœç´¢é—®é¢˜ã€‚

## æ ¸å¿ƒç‰¹æ€§

1. **æ··åˆç»“æ„**
   - ç©ºé—´åˆ†åŒºæ ‘ï¼ˆKDæ ‘/BKTï¼‰
   - å¯å¯¼èˆªå°ä¸–ç•Œå›¾
   - å¤šæ ‘ç»„åˆ

2. **æœç´¢ç­–ç•¥**
   - åŸºäºæ ‘çš„ç²—æœç´¢
   - åŸºäºå›¾çš„ç²¾ç»†åŒ–
   - å¹¶è¡Œæœç´¢è·¯å¾„

## æ€§èƒ½åˆ†æ

- **æ„å»ºæ—¶é—´**: O(n log n)
- **æŸ¥è¯¢æ—¶é—´**: å¹³å‡æƒ…å†µ O(log n)
- **ç©ºé—´å¤æ‚åº¦**: O(n)
- **å¯æ‰©å±•æ€§**: é«˜ç»´åº¦è¡¨ç°ä¼˜å¼‚

## åº”ç”¨åœºæ™¯

1. **å‘é‡æœç´¢**
   - å›¾åƒæ£€ç´¢
   - æ–‡æ¡£åµŒå…¥æœç´¢
   - ç‰¹å¾åŒ¹é…

2. **æœºå™¨å­¦ä¹ **
   - æ¨èç³»ç»Ÿ
   - æ¨¡å¼è¯†åˆ«
   - èšç±»åˆ†æ

3. **ä¿¡æ¯æ£€ç´¢**
   - è¯­ä¹‰æœç´¢
   - åŸºäºå†…å®¹çš„æ£€ç´¢
   - ç›¸ä¼¼é¡¹æœç´¢

## å¯è§†åŒ–åŠŸèƒ½

æœ¬æ¼”ç¤ºå®ç°äº†ä»¥ä¸‹åŠŸèƒ½ï¼š

1. **ç»“æ„å±•ç¤º**
   - ç©ºé—´åˆ†åŒºå¯è§†åŒ–
   - å›¾è¿æ¥æ€§å±•ç¤º
   - æœç´¢è·¯å¾„è¿½è¸ª

2. **äº¤äº’æ“ä½œ**
   - å‘é‡æ’å…¥
   - æœ€è¿‘é‚»æœç´¢
   - å‚æ•°è°ƒæ•´

3. **æ€§èƒ½æŒ‡æ ‡**
   - æœç´¢æ—¶é—´ç»Ÿè®¡
   - å¬å›ç‡ç›‘æ§
   - å†…å­˜ä½¿ç”¨è·Ÿè¸ª

## ä»£ç ç»“æ„

```
sptag/
â”œâ”€â”€ index.html      # ä¸»é¡µé¢
â”œâ”€â”€ sptag.js        # SPTAGå®ç°
â””â”€â”€ style.css       # æ ·å¼æ–‡ä»¶
```

## ä½¿ç”¨è¯´æ˜

1. **æ•°æ®æ“ä½œ**
   - æ·»åŠ å‘é‡
   - æœç´¢æœ€è¿‘é‚»
   - è°ƒæ•´æœç´¢å‚æ•°

2. **å¯è§†åŒ–æ§åˆ¶**
   - æŸ¥çœ‹æ ‘ç»“æ„
   - è§‚å¯Ÿå›¾è¿æ¥
   - è·Ÿè¸ªæœç´¢è¿‡ç¨‹

## å®ç°ç»†èŠ‚

1. **èŠ‚ç‚¹ç»“æ„**
   ```javascript
   class SPTAGNode {
       constructor(vector, id) {
           this.vector = vector;
           this.id = id;
           this.neighbors = new Set();
           this.treeChildren = [null, null];
       }
   }
   ```

2. **æ ‘æ„å»º**
   ```javascript
   function buildKDTree(points, depth = 0) {
       if (points.length === 0) return null;
       
       const axis = depth % dimension;
       points.sort((a, b) => a.vector[axis] - b.vector[axis]);
       
       const median = Math.floor(points.length / 2);
       const node = points[median];
       
       node.treeChildren[0] = buildKDTree(points.slice(0, median), depth + 1);
       node.treeChildren[1] = buildKDTree(points.slice(median + 1), depth + 1);
       
       return node;
   }
   ```

3. **å›¾æ„å»º**
   ```javascript
   function buildGraph(nodes, k) {
       for (const node of nodes) {
           const neighbors = findApproximateNN(node, nodes, k);
           for (const neighbor of neighbors) {
               node.neighbors.add(neighbor);
               neighbor.neighbors.add(node);
           }
       }
   }
   ```

## ä¼˜åŒ–ç­–ç•¥

1. **æ„å»ºæ—¶ä¼˜åŒ–**
   - å¹³è¡¡æ ‘æ„å»º
   - é«˜æ•ˆé‚»å±…é€‰æ‹©
   - å¹¶è¡Œå¤„ç†

2. **æœç´¢ä¼˜åŒ–**
   - æå‰ç»ˆæ­¢
   - ä¼˜å…ˆé˜Ÿåˆ—
   - è·ç¦»ç¼“å­˜

3. **å†…å­˜ç®¡ç†**
   - å‘é‡é‡åŒ–
   - ç´§å‡‘å­˜å‚¨
   - æ‰¹é‡å¤„ç†

## å…³é”®å‚æ•°

1. **æ ‘å‚æ•°**
   - å¶å­å¤§å°
   - æ ‘çš„æ•°é‡
   - åˆ†è£‚ç­–ç•¥

2. **å›¾å‚æ•°**
   - é‚»å±…æ•°é‡
   - æ„å»ºå› å­
   - æœç´¢å› å­

## é«˜çº§ç‰¹æ€§

1. **å¤šçº¿ç¨‹æ”¯æŒ**
   - å¹¶è¡Œæ ‘æ„å»º
   - å¹¶å‘æœç´¢
   - è´Ÿè½½å‡è¡¡

2. **è´¨é‡æ§åˆ¶**
   - å¬å›ç‡ç›‘æ§
   - ç²¾ç¡®åº¦è·Ÿè¸ª
   - æ€§èƒ½åˆ†æ

## å‚è€ƒèµ„æº

- [SPTAG: å¿«é€Ÿè¿‘ä¼¼æœ€è¿‘é‚»æœç´¢åº“](https://github.com/Microsoft/SPTAG)
- [ç”¨äºè¿‘ä¼¼æœ€è¿‘é‚»æœç´¢çš„ç©ºé—´åˆ†åŒºæ ‘å’Œå›¾ç®—æ³•](https://arxiv.org/abs/1908.10396)
- [å¾®è½¯çš„å‘é‡æœç´¢è§£å†³æ–¹æ¡ˆ](https://www.microsoft.com/en-us/research/project/vector-search/)
